# CLAUDE.md

このファイルは、Claude Code (claude.ai/code) がこのリポジトリで作業する際の指針を提供します。

## プロジェクト概要

Business Card Managerは、名刺管理のためのRails 7.0アプリケーションです。Ruby/Railsの習得を実証するための学習プロジェクトとして構築されています。現在は企画段階で、包括的なドキュメントがありますが、実際のRailsアプリケーションコードはまだありません。

## 開発環境

このプロジェクトは、開発にdevcontainerとDocker Composeを使用する設計になっています：

- **Ruby**: 3.3（YJITを有効化）
- **Rails**: 7.0
- **データベース**: MySQL 8.0
- **フロントエンド**: Bootstrap 5 + Stimulus（基本UI）、React/TypeScript（ダッシュボード）
- **開発環境**: VS Code + Dev Containers

## 主要ドキュメント

プロジェクトには`.kiro/specs/namecard-manager/`に詳細な企画ドキュメントがあります：

- `requirements.md` - 受け入れ基準を含む詳細な機能要件
- `design.md` - システムアーキテクチャとデータベース設計
- `tasks.md` - 実装タスクとプロジェクト計画
- `README.md` - プロジェクト概要と技術スタック
- `DEVELOP.md` - 開発ガイドラインとベストプラクティス

## プロジェクト状況

現在は**企画段階**です。リポジトリには以下が含まれています：
- 包括的なプロジェクトドキュメント
- 要件と設計の仕様書
- 開発プロセスのガイドライン
- 実際のRailsアプリケーションコードはまだなし

次のステップは、Railsアプリケーションを初期化し、文書化された要件と設計に従って計画された機能の実装を開始することです。

## 開発コマンド

まだ企画段階のため、具体的なRailsコマンドは利用できません。実装時には、標準的なRailsコマンドを使用する予定です：

- `rails server` - 開発サーバーの起動
- `bundle exec rspec` - テストの実行
- `rails db:create db:migrate db:seed` - データベースのセットアップ

## アーキテクチャ

計画されたアーキテクチャは、サービス層を追加したRails規約に従います：

- **MVCパターン**: 標準的なRailsコントローラー、モデル、ビュー
- **サービス層**: 複雑な操作（OCR、データ品質、分析）のビジネスロジック
- **API層**: Reactダッシュボードコンポーネント用のJSON API
- **バックグラウンドジョブ**: 画像処理とデータ分析用

## 主要機能（計画中）

- ユーザー認証と管理
- 名刺のCRUD操作
- 画像アップロードとOCR処理
- タグ管理と分類
- 検索とフィルタリング
- 統計・分析ダッシュボード
- データエクスポート機能
- ネットワーク分析と関係性マッピング

## 開発スタイル

このプロジェクトは学習目的のペアプログラミングで行います：
- **Claude**: 指示役として開発方針と次のステップを提案
- **開発者**: 操作役として実際のコード編集とファイル操作を実行
- **重要**: Claude はソースコードの編集やファイル作成は行わず、指示のみ提供

## 開発アプローチ

### テスト駆動開発（TDD）サイクル
このプロジェクトではTDDサイクルを厳密に守って開発を進めます：

1. **REDフェーズ** - 失敗するテストを書く
   - 機能要件に基づいてテストを先に作成
   - テストが失敗することを確認（まだ実装がないため）
   - テストが適切に失敗する理由を明確にする

2. **GREENフェーズ** - テストを通す最小限のコードを書く
   - テストをパスするための最小限の実装を行う
   - コードの品質よりもテストを通すことを優先
   - すべてのテストがパスすることを確認

3. **REFACTORINGフェーズ** - コードを改善する
   - テストを壊さずにコードをリファクタリング
   - Rails規約への準拠、コードの可読性向上
   - パフォーマンス最適化とセキュリティ要件の確認

### その他の重要な方針
- RSpecによるテストカバレッジ80%以上を維持
- Rails Wayの規約
- 複雑なビジネスロジックのためのサービスオブジェクト
- Reactコンポーネント用のAPI-firstデザイン
- セキュリティベストプラクティス
- YJITと適切なインデックスによるパフォーマンス最適化