# Business Card Manager - 実装タスクリスト

## 実装計画概要

このタスクリストは、Business Card Managerの段階的実装を目的として作成されています。各タスクは独立して実行可能で、テスト駆動開発（TDD）を前提としています。

## フェーズ1: 開発環境構築とプロジェクト基盤

- [ ] 1. 開発環境のセットアップ
  - devcontainer設定ファイルの作成（Ruby 3.3 + YJIT, Rails 7.0, MySQL 8.0, Node.js）
  - Docker Compose設定でMySQL、Redis、Railsアプリケーションコンテナを構成
  - VS Code設定とRuby/Rails開発用拡張機能の設定
  - _要件: Requirement 1（開発環境）_

- [ ] 2. Railsプロジェクトの初期化
  - Rails 7.0アプリケーションの作成（API + フルスタック対応）
  - Gemfileの設定（RSpec, FactoryBot, Capybara, Bootstrap, Stimulus等）
  - データベース設定（MySQL接続、環境別設定）
  - _要件: 全体基盤_

- [ ] 3. 基本的なプロジェクト構造の構築
  - MVC基本構造の作成
  - ルーティング設定の基盤
  - アプリケーション設定（タイムゾーン、ロケール等）
  - _要件: 全体基盤_

## フェーズ2: 認証・ユーザー管理機能

- [ ] 4. ユーザーモデルの実装
  - Userモデルの作成とマイグレーション
  - バリデーション実装（名前、メール、パスワード）
  - has_secure_passwordによる認証機能
  - _要件: Requirement 1_

- [ ] 5. ユーザー認証機能の実装
  - SessionsControllerの作成
  - ログイン・ログアウト機能の実装
  - Remember Me機能（永続化セッション）
  - _要件: Requirement 1_

- [ ] 6. ユーザー登録機能の実装
  - UsersControllerの作成
  - 新規登録フォームとバリデーション
  - アカウント有効化機能（メール認証）
  - _要件: Requirement 1_

- [ ] 7. パスワードリセット機能の実装
  - パスワードリセット用コントローラー
  - リセットトークン生成・検証
  - メール送信機能の実装
  - _要件: Requirement 1_

## フェーズ3: 名刺管理基本機能

- [ ] 8. 名刺モデルの実装
  - BusinessCardモデルの作成とマイグレーション
  - バリデーション実装（名前、会社名必須等）
  - Userとのアソシエーション設定
  - _要件: Requirement 2_

- [ ] 9. 名刺CRUD機能の実装
  - BusinessCardsControllerの作成
  - 名刺一覧表示機能（index）
  - 名刺詳細表示機能（show）
  - _要件: Requirement 2_

- [ ] 10. 名刺作成・編集機能の実装
  - 名刺新規作成フォーム（new, create）
  - 名刺編集フォーム（edit, update）
  - Strong Parametersによる安全な更新
  - _要件: Requirement 2_

- [ ] 11. 名刺削除機能の実装
  - 削除確認ダイアログの実装
  - 論理削除または物理削除の実装
  - 削除権限の確認
  - _要件: Requirement 2_

## フェーズ4: タグ管理機能

- [ ] 12. タグモデルの実装
  - Tagモデルの作成とマイグレーション
  - BusinessCardTagsの中間テーブル作成
  - many-to-manyアソシエーションの設定
  - _要件: Requirement 4_

- [ ] 13. タグ機能の基本実装
  - 名刺へのタグ追加・削除機能
  - タグの自動作成機能
  - タグ一覧表示機能
  - _要件: Requirement 4_

- [ ] 14. タグ管理画面の実装
  - タグ管理専用コントローラー
  - タグの編集・削除機能
  - タグ使用回数の表示
  - _要件: Requirement 4_

## フェーズ5: 検索・フィルタリング機能

- [ ] 15. 基本検索機能の実装
  - 名前・会社名での部分一致検索
  - 検索フォームの実装
  - 検索結果の表示
  - _要件: Requirement 3_

- [ ] 16. 高度な検索機能の実装
  - 複数条件での絞り込み検索
  - タグによるフィルタリング
  - 日付範囲での検索
  - _要件: Requirement 3_

- [ ] 17. 検索パフォーマンスの最適化
  - データベースインデックスの追加
  - 全文検索機能の実装
  - 検索結果のページネーション
  - _要件: Requirement 3_

## フェーズ6: 画像アップロード機能

- [ ] 18. Active Storageの設定
  - Active Storageの初期化
  - 画像アップロード用の設定
  - 画像バリデーション（形式、サイズ）
  - _要件: Requirement 5_

- [ ] 19. 画像アップロード機能の実装
  - 名刺画像のアップロード機能
  - 画像プレビュー機能
  - 画像の自動リサイズ処理
  - _要件: Requirement 5_

- [ ] 20. 画像表示・管理機能の実装
  - 名刺一覧での画像表示
  - 画像の削除・差し替え機能
  - 画像の最適化表示
  - _要件: Requirement 5_

## フェーズ7: OCR・自動データ抽出機能

- [ ] 21. OCR処理基盤の実装
  - OCR処理用のサービスクラス作成
  - 画像前処理機能の実装
  - OCR結果の構造化処理
  - _要件: Requirement 8_

- [ ] 22. 自動データ抽出機能の実装
  - アップロード画像からのテキスト抽出
  - 抽出データのフォーム自動入力
  - 信頼度スコアの算出・表示
  - _要件: Requirement 8_

- [ ] 23. OCR結果の検証・学習機能
  - ユーザーによる修正内容の記録
  - OCR精度向上のためのデータ蓄積
  - 処理状況の管理・表示
  - _要件: Requirement 8_

## フェーズ8: データ品質管理機能

- [ ] 24. データ品質評価システムの実装
  - データ品質スコア算出ロジック
  - 重複データ検出機能
  - データ完全性チェック機能
  - _要件: Requirement 9_

- [ ] 25. データ補完・修正機能の実装
  - 不完全データの自動補完提案
  - 重複データのマージ機能
  - データ検証ワークフロー
  - _要件: Requirement 9_

- [ ] 26. 品質管理ダッシュボードの実装
  - データ品質の可視化
  - 改善提案の表示
  - 品質向上の進捗追跡
  - _要件: Requirement 9_

## フェーズ9: 統計・分析機能

- [ ] 27. 基本統計機能の実装
  - 名刺数・企業数等の基本統計
  - 月別登録数のグラフ表示
  - 企業別・タグ別の統計
  - _要件: Requirement 6_

- [ ] 28. 人脈ネットワーク分析の実装
  - 人脈関係の可視化
  - 接触履歴の管理機能
  - 関係強度の算出
  - _要件: Requirement 10_

- [ ] 29. 高度な分析機能の実装
  - 推奨コンタクトの提案
  - ネットワーク分析ダッシュボード
  - フォローアップ提案機能
  - _要件: Requirement 10_

## フェーズ10: データエクスポート機能

- [ ] 30. CSV/JSONエクスポート機能の実装
  - 全データのCSVエクスポート
  - 詳細データのJSONエクスポート
  - 検索結果の選択的エクスポート
  - _要件: Requirement 7_

- [ ] 31. エクスポート機能の拡張
  - エクスポート形式の選択機能
  - 大量データの非同期処理
  - エクスポート履歴の管理
  - _要件: Requirement 7_

## フェーズ11: UI/UX改善・レスポンシブ対応

- [ ] 32. Bootstrap 5による基本UI実装
  - レスポンシブレイアウトの実装
  - モバイルファーストデザイン
  - アクセシビリティ対応
  - _要件: Requirement 11_

- [ ] 33. Stimulusによるインタラクション実装
  - 動的なUI要素の実装
  - フォームの使いやすさ向上
  - リアルタイム検索機能
  - _要件: Requirement 11_

- [ ] 34. React/TypeScriptダッシュボードの実装
  - 統計・分析画面のSPA化
  - インタラクティブなグラフ表示
  - リアルタイムデータ更新
  - _要件: Requirement 6, 10_

## フェーズ12: API実装

- [ ] 35. RESTful API基盤の実装
  - API用コントローラーの作成
  - JSON レスポンス形式の統一
  - API認証機能の実装
  - _要件: 全体（API対応）_

- [ ] 36. 名刺管理API の実装
  - 名刺CRUD操作のAPI化
  - 検索・フィルタリングAPI
  - 画像アップロードAPI
  - _要件: Requirement 2, 3, 5_

- [ ] 37. 分析・統計API の実装
  - 統計データ取得API
  - ネットワーク分析API
  - エクスポート機能API
  - _要件: Requirement 6, 7, 10_

## フェーズ13: テスト実装・型安全性向上

- [ ] 38. モデルテストの実装
  - User, BusinessCard, Tagモデルのテスト
  - バリデーション・アソシエーションのテスト
  - ビジネスロジックのテスト
  - _要件: 全体（品質保証）_

- [ ] 39. コントローラーテストの実装
  - 各コントローラーのアクションテスト
  - 認証・認可のテスト
  - エラーハンドリングのテスト
  - _要件: 全体（品質保証）_

- [ ] 40. システムテストの実装
  - ユーザーシナリオのE2Eテスト
  - ブラウザ操作のテスト
  - JavaScript機能のテスト
  - _要件: 全体（品質保証）_

- [ ] 41. RSpec→型シグネチャ自動生成機能の実装
  - RSpecテストコードの解析機能
  - メソッドの引数・戻り値型の推論
  - Sorbet sigの自動生成・挿入
  - 型安全性の向上とコード品質管理
  - _要件: 全体（コード品質・保守性向上）_

## フェーズ14: セキュリティ・パフォーマンス対策

- [ ] 42. セキュリティ対策の実装
  - CSRF・XSS対策の強化
  - SQLインジェクション対策
  - ファイルアップロードセキュリティ
  - _要件: 非機能要件（セキュリティ）_

- [ ] 43. パフォーマンス最適化の実装
  - データベースクエリ最適化
  - N+1問題の解決
  - キャッシュ機能の実装
  - _要件: 非機能要件（パフォーマンス）_

- [ ] 44. 監視・ログ機能の実装
  - アプリケーションログの整備
  - エラー監視機能
  - パフォーマンス監視
  - _要件: 非機能要件（監視）_

## フェーズ15: デプロイメント・運用

- [ ] 45. 本番環境設定の準備
  - 環境変数の設定
  - 本番用データベース設定
  - SSL/HTTPS設定
  - _要件: 非機能要件（デプロイ）_

- [ ] 46. CI/CDパイプラインの構築
  - GitHub Actionsの設定
  - 自動テスト実行
  - 自動デプロイ設定
  - _要件: 非機能要件（CI/CD）_

- [ ] 47. 本番デプロイとドキュメント整備
  - Heroku/AWSへのデプロイ
  - README.mdの作成
  - DEVELOP.mdの作成
  - _要件: 全体（ドキュメント）_

## 実装ガイドライン

### 開発原則
- **テスト駆動開発**: 各機能実装前にテストを作成
- **段階的実装**: 小さな単位での実装・テスト・デプロイ
- **コードレビュー**: 全ての変更にセルフレビューを実施
- **ドキュメント**: 実装と同時にドキュメントを更新

### 品質基準
- **テストカバレッジ**: 80%以上を維持
- **コード品質**: RuboCopによる静的解析をパス
- **パフォーマンス**: ページ読み込み3秒以内
- **セキュリティ**: Brakeman による脆弱性チェックをパス

### 完了基準
各タスクは以下の条件を満たした時点で完了とする：
1. 機能が要件通りに動作する
2. 対応するテストが実装され、パスする
3. コードレビューが完了している
4. ドキュメントが更新されている